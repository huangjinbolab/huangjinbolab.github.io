<header class="site-header">
  <div class="header-background"></div>
  <div class="header-top">
    <div class="header-top-content">
      <div class="header-left">
        <div class="lab-info-wrapper">
          <h1 class="lab-name">{{ site.Params.lab_name }}</h1>
          <div class="lab-affiliation">
            <img src="/images/logo.png" alt="{{ site.Params.address }}" class="affiliation-logo" />
          </div>
        </div>
      </div>
      <div class="header-right">
        <div class="language-switcher">
          <span class="lang-item active">ä¸­æ–‡</span>
          <span class="lang-separator">|</span>
          <span class="lang-item">English</span>
        </div>
        <div class="search-box">
          <input type="text" placeholder="å…³é”®è¯..." />
          <button class="search-btn">ğŸ”</button>
        </div>
      </div>
    </div>
  </div>
  <div class="header-nav">
    <button class="mobile-menu-toggle" aria-label="Toggle menu">
      <span></span>
      <span></span>
      <span></span>
    </button>
    <nav class="main-nav">
      <button class="mobile-menu-close" aria-label="Close menu">
        <span></span>
        <span></span>
        <span></span>
      </button>
      <ul>
        {{ range site.Menus.main }}
          <li><a href="{{ .URL }}" {{ if or (eq $.RelPermalink .URL) (and (ne .URL "/") (hasPrefix $.RelPermalink .URL)) }}class="active"{{ end }}>{{ .Name }}</a></li>
        {{ end }}
      </ul>
    </nav>
  </div>
</header>
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const menuToggle = document.querySelector('.mobile-menu-toggle');
    const menuClose = document.querySelector('.mobile-menu-close');
    const mainNav = document.querySelector('.main-nav');
    const body = document.body;
    
    if (menuToggle && mainNav) {
      function openMenu() {
        mainNav.classList.add('mobile-menu-open');
        menuToggle.classList.add('active');
        menuToggle.style.opacity = '0';
        menuToggle.style.pointerEvents = 'none';
        if (menuClose) menuClose.classList.add('active');
        body.style.overflow = 'hidden'; // é˜²æ­¢èƒŒæ™¯æ»šåŠ¨
      }
      
      function closeMenu() {
        mainNav.classList.remove('mobile-menu-open');
        menuToggle.classList.remove('active');
        menuToggle.style.opacity = '';
        menuToggle.style.pointerEvents = '';
        if (menuClose) menuClose.classList.remove('active');
        body.style.overflow = ''; // æ¢å¤æ»šåŠ¨
      }
      
      menuToggle.addEventListener('click', function(e) {
        e.stopPropagation();
        openMenu();
      });
      
      if (menuClose) {
        menuClose.addEventListener('click', function(e) {
          e.stopPropagation();
          closeMenu();
        });
      }
      
      // ç‚¹å‡»èœå•é¡¹åå…³é—­èœå•
      const menuLinks = mainNav.querySelectorAll('a');
      menuLinks.forEach(link => {
        link.addEventListener('click', function() {
          closeMenu();
        });
      });
      
      // ESCé”®å…³é—­èœå•
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && mainNav.classList.contains('mobile-menu-open')) {
          closeMenu();
        }
      });
    }
  });
</script>
